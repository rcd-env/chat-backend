<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>All Chats</title>
    <link rel="stylesheet" href="/stylesheets/chats.css" />
  </head>
  <body>
    <% if(chats.length>0) {%>
    <h1>All Chats :</h1>
    <% chats.forEach(chat => { %>
    <div class="chat">
      <p>To : <i><%= chat.to %></i></p>
      <p class="msg"><%= chat.message %></p>
      <p>From : <i><%= chat.from %></i></p>
      <button><a href="/chats/<%=chat._id%>/edit">Edit Chat</a></button>
      <form
        action="/chats/<%=chat._id%>/delete"
        method="post"
        style="display: inline"
      >
        <button
          type="submit"
          onclick="return confirm('Are you sure you want to delete this chat?');"
        >
          Delete Chat
        </button>
      </form>

      <hr />
      <p style="text-align: right">
        <%=chat.created_at.toString().split(" ").slice(0, 4).join(" ")%>
      </p>
    </div>
    <% });%> <% } else{%>
    <h1>No Chats Available.</h1>
    <% } %>
  </body>
</html>
